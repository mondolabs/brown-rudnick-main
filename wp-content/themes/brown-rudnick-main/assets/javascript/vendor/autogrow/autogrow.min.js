!function(e){e.fn.autogrow=function(t){function i(i){var s,a=e(this),h=a.innerHeight(),l=this.scrollHeight,r=a.data("autogrow-start-height")||0;if(l>h)this.scrollTop=0,t.animate?a.stop().animate({height:l},{duration:t.speed,complete:n}):(a.innerHeight(l),n());else if(!i||8==i.which||46==i.which||i.ctrlKey&&88==i.which)if(h>r){s=a.clone().addClass(t.cloneClass).css({position:"absolute",zIndex:-10,height:""}).val(a.val()),a.after(s);do l=s[0].scrollHeight-1,s.innerHeight(l);while(l===s[0].scrollHeight);l++,s.remove(),a.focus(),r>l&&(l=r),h>l&&(t.animate?a.stop().animate({height:l},{duration:t.speed,complete:o}):(a.innerHeight(l),o()))}else a.innerHeight(r)}function n(){t.context.trigger("autogrow:grow")}function o(){t.context.trigger("autogrow:shrink")}var s=e(this).css({overflow:"hidden",resize:"none"}),a=s.selector,h={context:e(document),animate:!0,speed:200,fixMinHeight:!0,cloneClass:"autogrowclone",onInitialize:!1};return t=e.isPlainObject(t)?t:{context:t?t:e(document)},t=e.extend({},h,t),s.each(function(n,o){var s,a;o=e(o),o.is(":visible")||parseInt(o.css("height"),10)>0?s=parseInt(o.css("height"),10)||o.innerHeight():(a=o.clone().addClass(t.cloneClass).val(o.val()).css({position:"absolute",visibility:"hidden",display:"block"}),e("body").append(a),s=a.innerHeight(),a.remove()),t.fixMinHeight&&o.data("autogrow-start-height",s),o.css("height",s),t.onInitialize&&o.length&&i.call(o[0])}),t.context.on("keyup paste",a,i),s}}(jQuery);